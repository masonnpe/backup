---
title: Eureka
categories: SpringCloud
tags: []
---



当ribbon与eureka联合使用时ribbon的服务配置清单ribbonserverlist会被discoveryEnabledNIWSServerlist重写，扩展成从eureka注册中心获取服务端列表



服务治理机制 注册中心互相注册组成高可用集群

失效剔除   eureka会创建一个定时任务，默认每隔一段时间当清单中超时的没有预约的服务剔除

自我保护  服务再注册是会维护一个心跳连接，eureka会将实例注册信息保存起来,让这些实例不过期，客户端必须要有容错机制，如请求重试，断路器等等



服务提供者  启动的时候会发送rest请求将自己注册到eureka上，同时带上自身服务的一些元数据，eureka接受到rest请求后，将元数据信息存储再一个双层map，第一层key是服务名，第二层key是具体服务的实例名

服务同步  服务提供者注册到不同的服务中心，提供者注册时会将请求装发到集群中其他的注册中心，实现同步

服务续约   注册完服务后，服务提供者会维护一个心跳，防止eureka将服务实例从服务列表中剔除



服务获取 启动消费者时，发送一个rest请求给注册中心，来获取上面注册的服务清单，eureka每隔一段时间返回给客户端

服务调用  消费端获取清单后，通过服务名可以获取具体提供服务的实例名和元数据信息，ribbon会默认采用轮询的方式进行调用